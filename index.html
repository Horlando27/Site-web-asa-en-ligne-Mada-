<!DOCTYPE html>
<html lang="mg">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Bouton Service Client</title>
  <style>
    /* Global Styles */
    

    h1, h2, h3, h4, h5, h6 {
      font-weight: bold;
      color: #00698f;
    }

    .container {
      max-width: 800px;
      margin: 40px auto;
      padding: 20px;
      background-color: #fff;
      border: 1px solid #ddd;
      box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    }

    /* Service Client Button */
    .service-client-button {
      position: fixed;
      bottom: 20px;
      right: 20px;
      display: flex;
      align-items: center;
      background-color: #00698f;
      color: #fff;
      text-decoration: none;
      padding: 10px 16px;
      border-radius: 50px;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
      transition: transform 0.2s ease, background-color 0.2s ease;
      z-index: 1000;
    }

    .service-client-button img {
      width: 24px;
      height: 24px;
      margin-right: 8px;
    }

    .service-client-button span {
      font-size: 14px;
      font-weight: 600;
    }

    .service-client-button:hover {
      background-color: #00567f;
      transform: translateY(-2px);
    }

    @media (max-width: 480px) {
      .service-client-button {
        bottom: 12px;
        right: 12px;
        padding: 8px 12px;
      }
      .service-client-button span {
        font-size: 12px;
      }
      .service-client-button img {
        width: 20px;
        height: 20px;
        margin-right: 6px;
      }
    }
  </style>
</head>
<body>

  <div class="container">
    <!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>ASA EN LIGNE ETO MADA</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
 /* RESET & BASE */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}
body {
  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
  background-color: #f4f6f8;
}

/* CONTAINER COMMUN */
.container {
  max-width: 500px;
  margin: 20px auto;
  background: #ffffff;
  padding: 25px;
  border-radius: 8px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.05);
}
.hidden {
  display: none;
}

/* FORMULAIRES */
h2 {
  text-align: center;
  font-weight: 600;
  color: #333;
  margin-bottom: 15px;
}
input[type="text"],
input[type="email"],
input[type="password"],
input[type="number"] {
  width: 100%;
  padding: 10px;
  margin: 8px 0 16px;
  border: 1px solid #ccc;
  border-radius: 5px;
  background: #fafafa;
  transition: border-color .3s ease;
}
input:focus {
  border-color: #007bff;
  outline: none;
}
button {
  width: 100%;
  padding: 12px;
  background-color: #007bff;
  color: #fff;
  border: none;
  border-radius: 5px;
  font-weight: 600;
  cursor: pointer;
  transition: background-color .3s ease;
}
button:hover {
  background-color: #0056b3;
}
.link {
  text-align: center;
  margin-top: 12px;
  font-size: 14px;
}
a {
  color: #007bff;
  text-decoration: none;
}
a:hover {
  text-decoration: underline;
}

/* HOMEPAGE LAYOUT */
#homepage {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

/* NAVIGATION STICKY */
.home-nav {
  position: sticky;
  top: 0;
  background: #fff;
  padding: 10px 0;
  display: flex;
  justify-content: space-around;
  border-bottom: 2px solid #e0e0e0;
  z-index: 100;
}
.home-nav button {
  flex: 1;
  margin: 0 5px;
  padding: 10px;
  background: #fff;
  border: 2px solid #007bff;
  border-radius: 6px;
  color: #007bff;
  font-size: 18px;
}
.home-nav button:hover {
  background: #007bff;
  color: #fff;
}

/* SECTIONS: bordure MITOKANA eo ambony */
.home-section {
  display: none;
  width: 100%;
  padding: 40px 20px;
  margin-top: 20px;
  background: #ffffff;
  border-top: 4px solid #007bff;
  border-radius: 0 0 8px 8px;
  box-shadow: 0 4px 15px rgba(0,0,0,0.05);
}
.home-section.active {
  display: block;
}
.home-section h2 {
  font-size: 26px;
  margin-bottom: 15px;
  color: #333;
}
.home-section p {
  font-size: 16px;
  line-height: 1.6;
  color: #555;
  max-width: 800px;
  margin: 0 auto;
  text-align: justify;
}

/* RESPONSIVE */
@media (max-width: 768px) {
  .container {
    margin: 15px;
    padding: 20px;
  }
  .home-nav button {
    font-size: 16px;
    padding: 8px;
  }
  .home-section {
    padding: 30px 15px;
  }
}
  </style>
</head>
<body>
  <!-- Section d'inscription -->
  <div id="registration-section" class="container">
    <h2>Inscription</h2>
    <form onsubmit="event.preventDefault(); registerUser();">
      <input type="text" id="full-name" placeholder="Nom complet" required>
      <input type="email" id="reg-email" placeholder="E-mail" required>
      <input type="password" id="reg-password" placeholder="Mot de passe" required>
      <input type="password" id="reg-confirm-password" placeholder="Confirmer mot de passe" required>
      <button type="submit">S'inscrire</button>
    </form>
    <div class="link">
      D√©j√† un compte ? <a href="#" onclick="showLoginSection()">Connectez-vous</a>
    </div>
  </div>

  <!-- Section de connexion initiale -->
  <div id="login-section" class="container hidden">
    <h2>Connexion</h2>
    <form onsubmit="event.preventDefault(); loginUser();">
      <input type="email" id="login-email" placeholder="E-mail" required>
      <input type="password" id="login-password" placeholder="Mot de passe" required>
      <button type="submit">Se connecter</button>
    </form>
    <div class="link">
      <a href="#" onclick="resetPassword()">Mot de passe oubli√© ?</a>
    </div>
    <div class="link">
      Pas de compte ? <a href="#" onclick="showRegistrationSection()">S'inscrire</a>
    </div>
  </div>

  <!-- Section fampahafantarana fandoavana -->
  <div id="payment-instructions" class="container hidden">
    <h2>Effectuez votre paiement</h2>
    <p>Pour recevoir votre code d'activation, veuillez envoyer <strong>1000 Ar</strong> isambolana amin'ireo laharana manaraka:</p>
    <ul>
      <li>0323911654 [RAVELOMANANTSOA Urmin]</li>
      <li>0384557584 [BEFOTSY Ranjity]</li>
      <li>0333635111 [RANAIVOSON Angelo]</li>
    </ul>
    <button onclick="showPaymentProofForm()">J'ai pay√©</button>
  </div>

  <!-- Formulaire de preuve de paiement -->
  <div id="payment-proof" class="container hidden">
    <h2>Preuve de paiement</h2>
    <input type="text" id="proof-fullname" placeholder="Nom complet" required>
    <input type="text" id="proof-phone" placeholder="Num√©ro de t√©l√©phone utilis√©" required>
    <input type="number" id="proof-amount" placeholder="Montant √† payer" required>
    <button onclick="submitPaymentProof()">Envoyer</button>
  </div>

  <!-- Notification de paiement en attente -->
  <div id="pending-verification" class="container hidden">
    <h2>En attente de v√©rification</h2>
    <p>Votre demande de paiement est en attente de v√©rification par l'administration.</p>
  </div>

  <!-- Notification d'activation -->
  <div id="activation-notification" class="container hidden">
    <h2>Paiement confirm√©</h2>
    <div id="admin-notification" class="hidden">
      <p id="admin-notification-text">Vous avez un message de l'admin.</p>
      <button onclick="viewAdminMessage()">Voir</button>
      <button onclick="dismissAdminMessage()">Fermer</button>
    </div>
    <p id="activation-code-container">Voici votre nouveau code d'activation : <strong id="user-activation-code"></strong></p>
    <button onclick="showFinalActivationForm()">Connectez-vous</button>
  </div>

  <!-- Formulaire final d'activation -->
  <div id="final-activation-form" class="container hidden">
    <h2>Connexion - Activation</h2>
    <form onsubmit="event.preventDefault(); finalLogin();">
      <input type="email" id="final-email" placeholder="E-mail" required>
      <input type="password" id="final-password" placeholder="Mot de passe" required>
      <input type="text" id="final-activation-code" placeholder="Code d'activation" required>
      <button type="submit">Entrer</button>
    </form>
  </div>

  <!-- Page d'accueil (miseho rehefa activation vita) -->
  <div id="homepage" class="container hidden">
    <!-- Navigation horizontal ho an'ny section -->
    <div class="home-nav">
      <button onclick="showSection('asaMampiasaVola')">üèòÔ∏è</button>
      <button onclick="showSection('asaGratuit')">üíº</button>
      <button onclick="showSection('formationTrading')">üî≥</button>
      <button onclick="showSection('transaction')">üíµ</button>
    </div>
    <!-- Contenu isaky ny section -->
    <div id="homepage-content">
      <div id="asaMampiasaVola" class="home-section active">
          
  
    <!DOCTYPE html><html lang="mg">
<head>
  <meta charset="UTF-8">
  <title>Asa en Ligne ‚Äì Profil, Publication, Reactions & Private Chat</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" />
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-app.js";
    import { getAuth, onAuthStateChanged, signInWithEmailAndPassword, updateProfile } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-auth.js";
    import { getFirestore, collection, doc, addDoc, setDoc, updateDoc, deleteDoc, getDoc, serverTimestamp, query, orderBy, onSnapshot, getDocs, increment } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-firestore.js";// Firebase Config
const firebaseConfig = {
  apiKey: "AIzaSyCK4HqGSjYRT2jFNhAvniSWIzhDvEb2qAQ",
  authDomain: "asa-en-ligne.firebaseapp.com",
  projectId: "asa-en-ligne",
  storageBucket: "asa-en-ligne.appspot.com",
  messagingSenderId: "58359363245",
  appId: "1:58359363245:web:ca5969776ce9cd86aef824",
  measurementId: "G-MRVHVWPV71"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const db = getFirestore(app);
// Demo login
signInWithEmailAndPassword(auth, "user@example.com", "password123").catch(console.error);
let currentUser = null;

// Initial setup
document.addEventListener('DOMContentLoaded', () => {
  // Theme
  const theme = localStorage.getItem('theme') || 'light';
  document.body.classList.toggle('dark-mode', theme === 'dark');
  document.getElementById('dark-toggle').checked = theme === 'dark';
  // Event listeners
  document.getElementById('settings-btn').addEventListener('click', toggleSettings);
  document.getElementById('save-info-btn').addEventListener('click', saveUserInfo);
  document.getElementById('dark-toggle').addEventListener('change', toggleDarkMode);
  document.getElementById('share-btn').addEventListener('click', shareLink);
  // Render profile icon if exists
  renderProfileIcon();
});

onAuthStateChanged(auth, user => {
  currentUser = user;
  document.getElementById('form-section').style.display = user ? 'block' : 'none';
  document.getElementById('auth-status').textContent = user ? `Miarahaba, ${user.displayName || user.email}` : '‚Ä¶ mampiasa authentication ‚Ä¶';
});

// Toggle settings modal
function toggleSettings() {
  document.getElementById('settings-modal').classList.toggle('show');
}

// Save user info to localStorage and Firestore
async function saveUserInfo() {
  const file = document.getElementById('profile-photo-input').files[0];
  if (file && currentUser) {
    const reader = new FileReader();
    reader.onload = async e => {
      const dataURL = e.target.result;
      localStorage.setItem('profilePhoto', dataURL);
      await updateProfile(currentUser, { photoURL: dataURL });
      renderProfileIcon();
    };
    reader.readAsDataURL(file);
  }
  const name = document.getElementById('info-name').value;
  const email = document.getElementById('info-email').value;
  const phone = document.getElementById('info-phone').value;
  localStorage.setItem('infoName', name);
  localStorage.setItem('infoEmail', email);
  localStorage.setItem('infoPhone', phone);
  if (currentUser) {
    await setDoc(doc(db, 'users', currentUser.uid), { name, email, phone, updatedAt: serverTimestamp() }, { merge: true });
  }
  alert('Information enregistr√©e');
}

// Render profile icon
function renderProfileIcon() {
  const dataURL = localStorage.getItem('profilePhoto');
  if (dataURL) document.getElementById('profile-icon').src = dataURL;
}

// Dark mode handling
function toggleDarkMode(e) {
  document.body.classList.toggle('dark-mode', e.target.checked);
  localStorage.setItem('theme', e.target.checked ? 'dark' : 'light');
}

// Share link functionality
function shareLink() {
  const shareData = { title: document.title, url: location.href };
  if (navigator.share) navigator.share(shareData).catch(console.error);
  else prompt('Copiez ce lien pour partager:', location.href);
}

// Post creation
window.postData = async () => {
  const desc = document.getElementById('description').value.trim();
  const fbLink = document.getElementById('fb-link').value.trim();
  if (!currentUser || !desc || !fbLink) return alert("Fenoy tsara an'ireo saha rehetra!");
  await addDoc(collection(db, 'publications'), { author: currentUser.uid, authorName: currentUser.displayName || currentUser.email, description: desc, fbLink, reactions: {}, createdAt: serverTimestamp() });
  document.getElementById('description').value = '';
  document.getElementById('fb-link').value = '';
};

// React to post
window.reactPost = async (postId, emoji) => {
  await updateDoc(doc(db, 'publications', postId), { [`reactions.${emoji}`]: increment(1) });
};

// Comment on post
window.commentOnPost = async postId => {
  const ta = document.getElementById(`comment-input-${postId}`);
  const text = ta.value.trim();
  if (!currentUser || !text) return;
  await addDoc(collection(db, 'publications', postId, 'comments'), { author: currentUser.uid, authorName: currentUser.displayName || currentUser.email, text, createdAt: serverTimestamp() });
  ta.value = '';
};

// Delete post
window.deletePost = async (postId, authorId) => {
  if (currentUser?.uid !== authorId) return;
  if (!confirm("Hofafana ve ity publication ity?")) return;
  await deleteDoc(doc(db, 'publications', postId));
};

// Real-time post display
onSnapshot(query(collection(db, 'publications'), orderBy('createdAt', 'desc')), async snapshot => {
  const out = document.getElementById('posts'); out.innerHTML = '';
  for (const docSnap of snapshot.docs) {
    const data = docSnap.data(), id = docSnap.id;
    const when = data.createdAt?.toDate().toLocaleString() || '';
    const avatarURL = data.author === currentUser?.uid && localStorage.getItem('profilePhoto')
      ? localStorage.getItem('profilePhoto')
      : 'https://via.placeholder.com/40';
    const avatar = `<img id='profile-icon' class='post-avatar' src='${avatarURL}' onclick="showUserInfo('${data.author}')" title='Voir profil'/>`;
    const emojis = ['üëç','‚ù§Ô∏è','üòÇ','üòÆ','üò¢'];
    const reactHtml = emojis.map(e=>`<span class='emoji-btn' onclick="reactPost('${id}','${e}')">${e}<sub>${data.reactions?.[e]||0}</sub></span>`).join(' ');
    const cmSnap = await getDocs(query(collection(db,'publications',id,'comments'),orderBy('createdAt','asc')));
    let commentsHtml=''; cmSnap.forEach(c=>{ const cd=c.data(), tm=cd.createdAt?.toDate().toLocaleString()||''; commentsHtml+=`<div class='comment'><strong>${cd.authorName}</strong><small>${tm}</small><p>${cd.text}</p></div>`; });
    const delBtn = currentUser?.uid===data.author?`<button class='delete-btn' onclick="deletePost('${id}','${data.author}')">üóëÔ∏è Supprimer</button>`:'';
    out.innerHTML += `<div class='post'>${avatar}<p><strong>${data.authorName}</strong> <em>${when}</em></p><p>${data.description}</p><p><a href='${data.fbLink}' target='_blank'>Facebook Link</a></p><div class='reactions'>${reactHtml}</div>${delBtn}<div class='comments'>${commentsHtml}<textarea id='comment-input-${id}' placeholder='Soraty hevitra‚Ä¶'></textarea><button onclick="commentOnPost('${id}')">‚Ü©Ô∏è</button></div></div>`;
  }
});

// Show detailed user info dialog
async function showUserInfo(uid) {
  const userDoc = await getDoc(doc(db, 'users', uid));
  if (userDoc.exists()) {
    const d = userDoc.data();
    alert(`Nom: ${d.name}\nEmail: ${d.email}\nPhone: ${d.phone}`);
  } else {
    alert('Tsy misy fampahalalana ho an\'ity mpampiasa ity.');
  }
}

  </script>
  <style>
    body { position: relative; max-width:700px; margin:2em auto; font-family:"Segoe UI",sans-serif; background:#f4f7fa; color:#333; }
    body.dark-mode { background:#121212; color:#e0e0e0; }
    h1 { text-align:center; color:#2c3e50; margin:0; padding:1em 0; }
    #settings-btn { position:fixed; top:50%; right:10px; transform:translateY(-50%); font-size:2em; cursor:pointer; color:#007BFF; background:rgba(255,255,255,0.9); border-radius:50%; padding:0.2em; box-shadow:0 2px 6px rgba(0,0,0,0.2); z-index:1000; }
    #settings-btn:hover { background:rgba(255,255,255,1); }
    #settings-modal { display:none; position:fixed; top:50%; right:50px; transform:translateY(-50%); width:260px; background:#fff; border:1px solid #ccc; border-radius:8px; padding:1em; box-shadow:0 4px 12px rgba(0,0,0,0.15); z-index:1001; }
    #settings-modal.show { display:block; }
    #form-section { background:#fff; padding:1em; border-radius:10px; box-shadow:0 2px 8px rgba(0,0,0,0.1); margin-bottom:2em; }
    textarea, input { width:100%; padding:0.6em; border:1px solid #ccc; border-radius:5px; margin:6px 0; }
    button { background:#007BFF; color:#fff; padding:0.5em 1em; border:none; border-radius:6px; cursor:pointer; transition:background 0.3s; }
    button:hover { background:#0056b3; }
    .post { background:#fff; padding:1em; margin-bottom:1.5em; border-radius:10px; box-shadow:0 2px 10px rgba(0,0,0,0.08); clear:both; }
    .dark-mode .post { background:#1e1e1e; }
    .post-avatar { width:40px; height:40px; border-radius:50%; float:left; margin-right:10px; cursor:pointer; }
    .reactions { margin:1em 0; }
    .emoji-btn { font-size:1.4em; margin-right:10px; cursor:pointer; }
    .emoji-btn sub { vertical-align:super; font-size:0.6em; color:#444; margin-left:3px; }
    .delete-btn { background:#dc3545; display:block; margin:8px 0; }
    .delete-btn:hover { background:#c82333; }
    .comment { background:#f6f9fc; border-left:4px solid #007BFF; margin:8px 0; padding:0.5em; border-radius:4px; }
    .dark-mode .comment { background:#2a2a2a; border-color:#BB86FC; }
    #settings-modal label { display:block; margin:8px 0 4px; }
  </style>
</head>
<body>
  <h1>Asa en Ligne</h1>
  <i id="settings-btn" class="fa-solid fa-cog" title="Param√®tres"></i>
  <div id="settings-modal">
    <h3>Param√®tres</h3>
    <section>
      <h4>1. Ajouter votre information</h4>
      <label for="profile-photo-input">Photo de profil:</label>
      <input type="file" id="profile-photo-input" accept="image/*">
      <label for="info-name">Nom:</label>
      <input type="text" id="info-name" placeholder="Votre nom">
      <label for="info-email">Email:</label>
      <input type="email" id="info-email" placeholder="Votre email">
      <label for="info-phone">T√©l√©phone:</label>
      <input type="tel" id="info-phone" placeholder="Votre num√©ro">
      <button id="save-info-btn">Enregistrer</button>
    </section>
    <hr>
    <section>
      <h4>2. Mode sombre</h4>
      <label for="dark-toggle">Activer le mode sombre:</label>
      <input type="checkbox" id="dark-toggle">
    </section>
    <hr>
    <section>
      <h4>3. Partager</h4>
      <button id="share-btn">Partager le lien</button>
    </section>
  </div>  <section id="form-section">
    <div id="auth-status"></div>
    <textarea id="description" rows="3" placeholder="Ahoana ny hevitrao?‚Ä¶"></textarea>
    <input type="url" id="fb-link" placeholder="Lien Facebook‚Ä¶">
    <button onclick="postData()">Alefa</button>
  </section>
  <hr>
  <div id="posts"></div>
</body>
</html>
      
      
    
    
    
        <h2>FILAZANA </h2>
     <p style="background-color: #ffffff; padding: 25px; border-radius: 10px; box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1); border-left: 6px solid #007BFF; font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; font-size: 18px; line-height: 1.6; color: #333333; max-width: 700px; margin: 40px auto; text-align: justify;">
  ‚ö†Ô∏è Miala tsiny indrindra aminareo mpanjifa sy mpitsidika rehetra fa efa elaela izay no tsy niasa ny site Asa En Ligne Mada. 
  Nisy olana teknika tsy maintsy nojerentsika, ary tsy maintsy nandraisana fotoana kely ny fanarenana azy. 
  Efa miezaka mafy izahay amin‚Äôizao fotoana izao hanarenana sy hanavaozana tanteraka ilay site mba hahafahanareo manohy 
  mampiasa azy amin'ny fomba mahomby sy mahafinaritra. Mankasitraka ny faharetanareo sy ny fanohananareo hatrany!
     </p>
      </div>
      
      <div id="asaGratuit" class="home-section">
        <h2>Asa Gratuit</h2>
       
      </div>
      <div id="formationTrading" class="home-section">
        <h2>Formation Trading</h2>
        
      </div>
      <div id="transaction" class="home-section">
        <h2>Transaction</h2>
       <a href="https://demande-du-retrait.vercel.app/" target="_blank">
  <button style="padding: 10px 20px; background-color: #007bff; color: white; border: none; border-radius: 5px; cursor: pointer;">
    RETRAIT D'ARGENT 
  </button>

          </a>
      </div>
    </div>
  </div>


  <!-- Firebase + App JS -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-app.js";
    import {
      getAuth,
      createUserWithEmailAndPassword,
      signInWithEmailAndPassword,
      sendPasswordResetEmail
    } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-auth.js";
    import {
      getFirestore,
      doc,
      setDoc,
      getDoc,
      updateDoc,
      addDoc,
      collection
    } from "https://www.gstatic.com/firebasejs/11.3.1/firebase-firestore.js";

    // Configuration Firebase
    const firebaseConfig = {
      apiKey: "AIzaSyCK4HqGSjYRT2jFNhAvniSWIzhDvEb2qAQ",
      authDomain: "asa-en-ligne.firebaseapp.com",
      projectId: "asa-en-ligne",
      storageBucket: "asa-en-ligne.appspot.com",
      messagingSenderId: "58359363245",
      appId: "1:58359363245:web:ca5969776ce9cd86aef824",
      measurementId: "G-MRVHVWPV71"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);
    const db = getFirestore(app);

    // Global variable ho an'ny hafatra admin
    let storedAdminMessage = "";

    // ----- Inscription -----
    window.registerUser = function() {
      const fullName = document.getElementById("full-name").value.trim();
      const email = document.getElementById("reg-email").value.trim();
      const password = document.getElementById("reg-password").value;
      const confirmPassword = document.getElementById("reg-confirm-password").value;
      if(password !== confirmPassword) {
        alert("Les mots de passe ne correspondent pas.");
        return;
      }
      createUserWithEmailAndPassword(auth, email, password)
        .then((userCredential) => {
          const user = userCredential.user;
          // Enregistrer l'utilisateur sans code d'activation tant que paiement non effectu√©
          setDoc(doc(db, "users", user.uid), {
            fullName: fullName,
            email: email,
            paymentStatus: "not_paid",
            createdAt: new Date()
          })
          .then(() => {
            alert("Inscription r√©ussie. Veuillez effectuer le paiement pour recevoir un code d'activation.");
            showLoginSection();
          })
          .catch((error) => alert("Erreur lors de l'enregistrement : " + error.message));
        })
        .catch((error) => alert("Erreur : " + error.message));
    };

    // ----- Affichage des sections -----
    window.showRegistrationSection = function() {
      document.getElementById("registration-section").classList.remove("hidden");
      document.getElementById("login-section").classList.add("hidden");
      document.getElementById("final-activation-form").classList.add("hidden");
      document.getElementById("activation-notification").classList.add("hidden");
      document.getElementById("payment-instructions").classList.add("hidden");
      document.getElementById("payment-proof").classList.add("hidden");
      document.getElementById("pending-verification").classList.add("hidden");
      document.getElementById("homepage").classList.add("hidden");
    };

    window.showLoginSection = function() {
      document.getElementById("registration-section").classList.add("hidden");
      document.getElementById("login-section").classList.remove("hidden");
      document.getElementById("final-activation-form").classList.add("hidden");
      document.getElementById("activation-notification").classList.add("hidden");
      document.getElementById("payment-instructions").classList.add("hidden");
      document.getElementById("payment-proof").classList.add("hidden");
      document.getElementById("pending-verification").classList.add("hidden");
      document.getElementById("homepage").classList.add("hidden");
    };

    // ----- Connexion initiale -----
    window.loginUser = function() {
      const email = document.getElementById("login-email").value.trim();
      const password = document.getElementById("login-password").value;
      signInWithEmailAndPassword(auth, email, password)
        .then(async (userCredential) => {
          const user = userCredential.user;
          const userDoc = await getDoc(doc(db, "users", user.uid));
          if(userDoc.exists()){
            const userData = userDoc.data();
            if(userData.paymentStatus === "confirmed") {
              // Afficher activation-notification avec code d'activation et notification admin √©ventuelle
              document.getElementById("activation-notification").classList.remove("hidden");
              document.getElementById("activation-code-container").innerHTML = 
                "Voici votre nouveau code d'activation : <strong id='user-activation-code'>" + userData.activationCode + "</strong>";
              if(userData.adminMessage) {
                storedAdminMessage = userData.adminMessage;
                document.getElementById("admin-notification-text").innerText = "Vous avez un message de l'admin.";
                document.getElementById("admin-notification").classList.remove("hidden");
              } else {
                document.getElementById("admin-notification").classList.add("hidden");
              }
            } else if(userData.paymentStatus === "pending") {
              document.getElementById("pending-verification").classList.remove("hidden");
            } else {
              document.getElementById("payment-instructions").classList.remove("hidden");
            }
          } else {
            alert("Aucune donn√©e utilisateur trouv√©e.");
          }
        })
        .catch(error => alert("Erreur : " + error.message));
    };

    window.resetPassword = function() {
      const email = document.getElementById("login-email").value.trim();
      if(!email) {
        alert("Veuillez entrer votre adresse e-mail.");
        return;
      }
      sendPasswordResetEmail(auth, email)
        .then(() => alert("Email de r√©initialisation envoy√© !"))
        .catch((error) => alert("Erreur : " + error.message));
    };

    // ----- Preuve de paiement -----
    window.showPaymentProofForm = function() {
      document.getElementById("payment-instructions").classList.add("hidden");
      document.getElementById("payment-proof").classList.remove("hidden");
    };

    window.submitPaymentProof = async function() {
      const proofFullName = document.getElementById("proof-fullname").value.trim();
      const proofPhone = document.getElementById("proof-phone").value.trim();
      const proofAmount = document.getElementById("proof-amount").value.trim();
      if(!proofFullName || !proofPhone || !proofAmount) {
        alert("Veuillez remplir tous les champs.");
        return;
      }
      try {
        await addDoc(collection(db, "paymentRequests"), {
          userId: auth.currentUser.uid,
          fullName: proofFullName,
          phone: proofPhone,
          amount: proofAmount,
          timestamp: new Date().toISOString(),
          status: "pending"
        });
        await updateDoc(doc(db, "users", auth.currentUser.uid), {
          paymentStatus: "pending"
        });
        alert("Votre demande de paiement a √©t√© envoy√©e et est en attente de v√©rification.");
        document.getElementById("payment-proof").classList.add("hidden");
        document.getElementById("pending-verification").classList.remove("hidden");
      } catch (error) {
        alert("Erreur lors de l'envoi de la preuve : " + error.message);
      }
    };

    // ----- Notification admin -----
    window.viewAdminMessage = function() {
      alert("Message de l'admin : " + storedAdminMessage);
      sessionStorage.setItem("adminMessageSeen", "true");
      document.getElementById("admin-notification").classList.add("hidden");
    };

    window.dismissAdminMessage = function() {
      sessionStorage.setItem("adminMessageSeen", "true");
      document.getElementById("admin-notification").classList.add("hidden");
    };

    // ----- Activation finale -----
    window.showFinalActivationForm = function() {
      document.getElementById("activation-notification").classList.add("hidden");
      document.getElementById("final-activation-form").classList.remove("hidden");
      const email = document.getElementById("login-email").value.trim();
      document.getElementById("final-email").value = email;
    };

    window.finalLogin = function() {
      const email = document.getElementById("final-email").value.trim();
      const password = document.getElementById("final-password").value;
      const activationCodeInput = document.getElementById("final-activation-code").value.trim();
      signInWithEmailAndPassword(auth, email, password)
        .then(async (userCredential) => {
          const user = userCredential.user;
          const userDoc = await getDoc(doc(db, "users", user.uid));
          if(userDoc.exists()){
            const userData = userDoc.data();
            if(userData.activationCode === activationCodeInput) {
              alert("Connexion r√©ussie !");
              // Afeno ny formulaire rehetra ary asehoy ny page d'accueil
              document.getElementById("registration-section").classList.add("hidden");
              document.getElementById("login-section").classList.add("hidden");
              document.getElementById("payment-instructions").classList.add("hidden");
              document.getElementById("payment-proof").classList.add("hidden");
              document.getElementById("pending-verification").classList.add("hidden");
              document.getElementById("activation-notification").classList.add("hidden");
              document.getElementById("final-activation-form").classList.add("hidden");
              // Asehoy ny page d'accueil
              document.getElementById("homepage").classList.remove("hidden");
            } else {
              alert("Code d'activation incorrect.");
            }
          } else {
            alert("Aucune donn√©e utilisateur trouv√©e.");
          }
        })
        .catch(error => alert("Erreur : " + error.message));
    };

    // ----- Navigation ao amin'ny page d'accueil -----
    window.showSection = function(sectionId) {
      const sections = document.querySelectorAll(".home-section");
      sections.forEach(section => {
        if(section.id === sectionId) {
          section.classList.add("active");
        } else {
          section.classList.remove("active");
        }
      });
    };
  </script>
</body>
  </html>
  
  </div>

  <!-- Bouton Service Client -->
  <a href="https://service-client-asa-en-ligne-site-we.vercel.app/"
     class="service-client-button"
     target="_blank"
     title="Mifandraisa amin'ny Service Client">
    <img src="https://cdn-icons-png.flaticon.com/512/219/219983.png" alt="Client Icon">
    <span>Service Client</span>
  </a>

</body>
</html>

<!DOCTYPE html>
<html lang="mg">
<head>
  <meta charset="UTF-8">
  <title>Midira ao amin'ny Groupe WhatsApp</title>
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
    }

    .download-btn {
      position: fixed;
      bottom: 15px;
      left: 15px;
      padding: 10px 20px;
      background-color: #25D366; /* Loko WhatsApp */
      color: white;
      text-decoration: none;
      border-radius: 50px;
      font-size: 15px;
      font-weight: bold;
      box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background-color 0.3s ease, transform 0.2s ease;
    }

    .download-btn:hover {
      background-color: #128C7E;
      transform: translateY(-2px);
    }

    .download-icon {
      font-size: 18px;
    }
  </style>
</head>
<body>

  <!-- Bouton Miditra amin'ny Groupe WhatsApp -->
  <a href="https://chat.whatsapp.com/LhLJuNd3pX2JOE2hDGkFML?mode=ac_c" 
     target="_blank" 
     class="download-btn">
    <span class="download-icon">üì•</span>T√©l√©charger Apk
  </a>

</body>
</html>
